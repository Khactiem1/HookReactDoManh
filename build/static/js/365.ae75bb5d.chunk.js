"use strict";(self.webpackChunkgraduation=self.webpackChunkgraduation||[]).push([[365],{4365:function(e,r,t){t.r(r),t.d(r,{default:function(){return A}});t(4942);var n=t(1413),a=t(9439),s=t(1890),o=t(6403),i=t(2917),d=t(3418),l=t(2791),c=t(9085),u=t(6355),g=t(1694),x=t.n(g),m=t(6053),h=t(1049),f=t(184),b=function(e){var r=e.children;return(0,f.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,f.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,f.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,f.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,f.jsx)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-5xl",children:(0,f.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:r})})})})]})},y=function(e){var r=e.handleAgreeModalConfirm,t=e.handleCancelModalConfirm,n=e.question;return(0,f.jsxs)("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[(0,f.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"}),(0,f.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,f.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,f.jsx)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl",children:(0,f.jsx)("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:(0,f.jsxs)("div",{className:"p-6 text-center",children:[(0,f.jsx)("h2",{className:"mb-5 text-2xl font-normal text-gray-500 dark:text-gray-400",children:n}),(0,f.jsx)("button",{onClick:function(){r()},className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2",children:"Yes"}),(0,f.jsx)("button",{onClick:function(e){t()},className:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",children:"No"})]})})})})})]})},p=[5,10,20,50,100],v=function(e){var r=e.totalPage,t=e.page,a=e.filter,s=e.setFilter,o=new Array;Array(r).fill(0).forEach((function(e,r){return o.push(r+1)}));var i=o.slice(0,1);return(0,f.jsxs)("div",{className:"mt-6 flex justify-center items-center",children:[(0,f.jsx)("nav",{"aria-label":"Page navigation example",children:(0,f.jsxs)("ul",{className:"inline-flex -space-x-px",children:[(0,f.jsx)("li",{children:1===t?(0,f.jsx)("span",{className:"cursor-not-allowed rounded-l-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Previous"}):(0,f.jsx)("span",{onClick:function(){s((function(e){return(0,n.Z)((0,n.Z)({},e),{},{v_Page:a.v_Page-1})}))},className:"rounded-l-lg border cursor-pointer border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Previous"})}),i.map((function(e,r){return(0,f.jsx)("li",{children:(0,f.jsx)("a",{onClick:function(){return function(e){s((function(r){return(0,n.Z)((0,n.Z)({},r),{},{v_Page:e})}))}(e)},className:"border bg-gray-100 text-gray-500 border-gray-300 py-2 px-3 leading-tight cursor-pointer hover:bg-gray-100  hover:text-gray-700",children:t})},e)})),(0,f.jsx)("li",{children:t===r?(0,f.jsx)("span",{className:"cursor-not-allowed rounded-r-lg border border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Next"}):(0,f.jsx)("span",{onClick:function(){s((function(e){return(0,n.Z)((0,n.Z)({},e),{},{v_Page:a.v_Page+1})}))},className:"rounded-r-lg border cursor-pointer border-gray-300 bg-white py-2 px-3 leading-tight text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",children:"Next"})})]})}),(0,f.jsx)("div",{children:(0,f.jsx)("select",{onChange:function(e){return function(e){s((function(r){return(0,n.Z)((0,n.Z)({},r),{},{v_Page:1,v_Size:e.target.value})}))}(e)},id:"limit",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:p.map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))})}),(0,f.jsxs)("p",{style:{margin:"0 10px"},children:["Page ",t," in ",r," page"]})]})},k=function(){return(0,f.jsxs)("div",{role:"status",className:"mt-6 animate-pulse",children:[(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10 rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("div",{className:"mb-2.5 h-10  rounded bg-gray-200 dark:bg-gray-700"})]})},j=t(7425),N=function(e){var r=e.name,t=e.checked,n=e.rowData,a=e.handleChangeCheckBox;return(0,f.jsx)("input",{type:"checkbox",name:r,checked:t,onChange:function(e){return a(e,n)}})},w=function(e){var r=e.rowData,t=e.columns,n=e.handleOpenModalConfirm,a=e.handleOpenModal,s=e.handleChangeCheckBox;return(0,f.jsx)("div",{className:"relative mt-6 overflow-x-auto shadow-md sm:rounded-lg",children:(0,f.jsxs)("table",{className:"w-full text-left text-gray-500 dark:text-gray-400",children:[(0,f.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400",children:(0,f.jsx)("tr",{children:t.map((function(e){return(0,f.jsx)("th",{scope:"col",className:"text-center py-4",children:e.title},e.dataIndex)}))})}),(0,f.jsx)("tbody",{style:{fontSize:"18px"},children:0==r.length?(0,f.jsx)("tr",{className:"flex justify-end",children:(0,f.jsx)("td",{className:"text-red-600",children:"Kh\xf4ng c\xf3 b\u1ea3n ghi n\xe0o"})}):r.map((function(e,r){return(0,f.jsx)("tr",{className:"border-b bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-600",children:t.map((function(t){return(0,f.jsx)(l.Fragment,{children:(0,f.jsxs)("td",{className:"text-center py-4",children:[t.checkbox&&(0,f.jsx)(N,{checked:(null===e||void 0===e?void 0:e.isChecked)||!1,handleChangeCheckBox:s,rowData:e}),"index"===t.dataIndex&&r+1,e[t.dataIndex],t.edit&&(0,f.jsx)("button",{onClick:function(){return a("edit",e)},className:"mr-5 text-blue-600 dark:text-blue-500",children:(0,f.jsx)(u.ffH,{})}),t.delete&&(0,f.jsx)("button",{onClick:function(){return n(e,"delete_one")},className:"text-red-600 dark:text-red-500",children:(0,f.jsx)(j.GnT,{})})]})},t.dataIndex)}))},r)}))})]})})},C={v_Page:1,v_Size:5,v_Where:""},Z=t(4571),_=t(1134),M=t(5737),P=t(3566),S={product_id:"",product_name:"",product_desc:""},I=function(e){var r,t=e.isModal,a=e.setIsModal,s=e.handleCancelModal,o=e.setFormData,i=e.formData,d=e.postProductMutation,u=e.updateProductMutate,g=(0,_.cI)(),x=g.register,m=g.setValue,h=g.handleSubmit,b=g.formState.errors;(0,l.useEffect)((function(){i&&(m("product_name",i.product_name),m("product_desc",i.product_desc))}),[i,m]);return(0,f.jsxs)("div",{className:"mt-3 text-center sm:mt-0 justify-around sm:text-left",children:[(0,f.jsx)("h1",{className:"text-2xl font-medium leading-6 text-gray-900 mb-5",id:"modal-title",children:"edit"==t.status?"Edit":"Th\xeam"}),(0,f.jsxs)("form",{onSubmit:h((function(e){"create"==t.status&&d.mutate(e,{onSuccess:function(){a((function(e){return(0,n.Z)((0,n.Z)({},e),{},{status:"",isOpenModal:!1})})),o(S),c.Am.success("Th\xeam th\xe0nh c\xf4ng \u2764")},onError:function(){c.Am.error("Th\xeam th\u1ea5t b\u1ea1i \u2764")}}),"edit"==t.status&&u.mutate(e,{onSuccess:function(){a((function(e){return(0,n.Z)((0,n.Z)({},e),{},{status:"",isOpenModal:!1})})),o(S),c.Am.success("C\u1eadp nh\u1eadp th\xe0nh c\xf4ng")},onError:function(){c.Am.error("C\u1eadp nh\u1eadp th\u1ea5t b\u1ea1i \u2764")}})})),children:[(0,f.jsxs)("div",{className:"w-full flex items-center mb-5",children:[(0,f.jsx)(P.Z,{label:"T\xean",name:"product_name",type:"text",placeholder:"T\xean",className:"bg-gray-50 border border-gray-300 block w-2/3 text-gray-900 text-sm rounded-lg p-2.5",register:(0,n.Z)({},x("product_name",M.j.product_name)),errorMessage:null===(r=b.product_name)||void 0===r?void 0:r.message}),(0,f.jsx)(P.Z,{label:"M\xf4 t\u1ea3",name:"product_desc",type:"text",placeholder:"M\xf4 t\u1ea3",className:"bg-gray-50 border border-gray-300 block w-2/3 text-gray-900 text-sm rounded-lg p-2.5",register:(0,n.Z)({},x("product_desc",M.j.notRequired))})]}),(0,f.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,f.jsx)("button",{type:"submit",className:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm",children:"Ok"}),(0,f.jsx)("button",{onClick:function(){return s()},className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})},A=function(){var e,r=(0,o.NL)(),t=(0,l.useState)([]),g=(0,a.Z)(t,2),p=g[0],j=g[1],_=(0,l.useState)(C),M=(0,a.Z)(_,2),P=M[0],A=M[1],D=(0,l.useState)(S),T=(0,a.Z)(D,2),F=T[0],O=T[1],q=(0,l.useState)(""),z=(0,a.Z)(q,2),E=z[0],B=z[1],K=(0,l.useState)(!1),L=(0,a.Z)(K,2),Q=L[0],X=L[1],W=(0,l.useState)([]),G=(0,a.Z)(W,2),H=G[0],R=G[1],U=(0,l.useState)({status:"",isOpenModal:!1}),V=(0,a.Z)(U,2),Y=V[0],J=V[1],$=(0,i.a)({staleTime:0,cacheTime:5e3,queryKey:["filters",P],queryFn:function(){return function(e){return h.Z.post("Product/fitter",e)}(P)},onSuccess:function(e){j(e.data.recordList||[])},keepPreviousData:!0}),ee=(0,d.D)({mutationFn:function(e){return r=e,h.Z.post("Product",r);var r},onSuccess:function(){r.invalidateQueries({queryKey:["filters",P]}),R([])}}),re=(0,d.D)({mutationFn:function(e){return function(e,r){return h.Z.put("Product/".concat(e),r)}(E,e)},onSuccess:function(){r.invalidateQueries({queryKey:["filters",P]})}}),te=(0,d.D)({mutationFn:function(e){return function(e){return h.Z.get("Product/".concat(e))}(e)}}),ne=(0,d.D)({mutationFn:function(e){return function(e){return h.Z.delete("Product/".concat(e))}(e)}}),ae=(0,d.D)({mutationFn:function(e){return function(e){return h.Z.post("Product/bulk_delete",e)}(e)}}),se=Math.ceil(((null===(e=$.data)||void 0===e?void 0:e.data.totalCount)||0)/P.v_Size),oe=function(e,r){"edit"==e&&(te.mutate(r.product_id,{onSuccess:function(e){O(e.data)}}),J((function(e){return(0,n.Z)((0,n.Z)({},e),{},{status:"edit",isOpenModal:!0})})),B(r.product_id)),"create"==e&&J((function(e){return(0,n.Z)((0,n.Z)({},e),{},{status:"create",isOpenModal:!0})}))},ie=function(e,r){"delete_one"===r&&(B(e.product_id),X(!0)),"delete_multiple"===r&&X(!0)},de=function(e,r){var t=e.target,a=t.name,s=t.checked;if("checkboxall"===a){var o=p.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{isChecked:s})}));j(o);var i=o.filter((function(e){return!0===(null===e||void 0===e?void 0:e.isChecked)})).map((function(e){return e.product_id}));R(i)}else{var d=p.map((function(e){return e===r?(0,n.Z)((0,n.Z)({},e),{},{isChecked:s}):e}));j(d);var l=d.filter((function(e){return!0===(null===e||void 0===e?void 0:e.isChecked)})).map((function(e){return e.product_id}));R(l)}},le=(0,l.useCallback)(function(e){var r;return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=this;r&&clearTimeout(r),r=setTimeout((function(){r=null,e.apply(s,n)}),1e3)}}((function(e){A((function(r){return(0,n.Z)((0,n.Z)({},r),{},{v_Where:e.target.value})}))})),[]),ce=[{dataIndex:"checkbox",title:(0,f.jsx)(N,{name:"checkboxall",checked:p.filter((function(e){return 1!=e.isChecked})).length<1,handleChangeCheckBox:de}),checkbox:!0},{dataIndex:"index",title:"STT"},{dataIndex:"product_name",title:"T\xean"},{dataIndex:"product_desc",title:"M\xf4 t\u1ea3"},{dataIndex:"action",title:"Ch\u1ee9c n\u0103ng",delete:!0,edit:!0}];return(0,f.jsxs)(f.Fragment,{children:[Q&&(0,f.jsx)(y,{question:"B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n xo\xe1 kh\xf4ng?",handleCancelModalConfirm:function(){X(!1)},handleAgreeModalConfirm:function(){E?ne.mutate(E,{onSuccess:function(e){r.invalidateQueries({queryKey:["filters",P]}),X(!1),B(""),c.Am.success("Xo\xe1 th\xe0nh c\xf4ng")},onError:function(){c.Am.error("Xo\xe1 th\u1ea5t b\u1ea1i")}}):ae.mutate(H,{onSuccess:function(e){r.invalidateQueries({queryKey:["filters",P]}),X(!1),R([]),c.Am.success("Xo\xe1 th\xe0nh c\xf4ng")},onError:function(){c.Am.error("Xo\xe1 th\u1ea5t b\u1ea1i")}})}}),Y.isOpenModal&&(0,f.jsx)(b,{children:(0,f.jsx)(I,{updateProductMutate:re,setIsModal:J,postProductMutation:ee,handleCancelModal:function(){J((function(e){return(0,n.Z)((0,n.Z)({},e),{},{status:"",isOpenModal:!1})})),O(S)},setFormData:O,formData:F,isModal:Y})}),(0,f.jsxs)(Z.Z,{className:"my-5",children:[(0,f.jsx)(Z.Z.Item,{href:"",children:(0,f.jsx)(s.Z,{})}),(0,f.jsx)(Z.Z.Item,{href:"",children:(0,f.jsx)("span",{children:"Application"})}),(0,f.jsx)(Z.Z.Item,{href:"",children:"Product"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("button",{onClick:function(){return oe("create","")},type:"button",className:"text-blue-700 bg-gray-200 focus:outline-none focus:ring-4 focus:ring-offset-black rounded-full text-xl px-3 py-3 text-center",children:(0,f.jsx)(m.vcu,{})}),(0,f.jsx)("button",{onClick:function(){return ie(H,"delete_multiple")},type:"button",className:x()("text-red-700 bg-gray-200 focus:outline-none focus:ring-4 focus:ring-offset-black rounded-full text-xl px-3 py-3 text-center",{invisible:H.length<=0}),children:(0,f.jsx)(u.lp8,{})})]}),(0,f.jsx)("label",{htmlFor:"table-search",className:"sr-only",children:"Search"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,f.jsx)(u.U41,{})}),(0,f.jsx)("input",{onChange:function(e){return le(e)},type:"text",className:"block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"T\xecm ki\u1ebfm"})]})]}),!$.isLoading&&(0,f.jsx)(w,{handleChangeCheckBox:de,handleOpenModal:oe,handleOpenModalConfirm:ie,rowData:p,columns:ce}),!$.isLoading&&(0,f.jsx)(v,{page:P.v_Page,totalPage:se,filter:P,setFilter:A}),$.isLoading&&(0,f.jsx)(k,{})]})}}}]);
//# sourceMappingURL=365.ae75bb5d.chunk.js.map